# oracle-kubernetes-engine
The demo of how to create Virtual Cloud Network and Kubernetes Cluster in Oracle Kubernetes Engine (OKE) with OCI Go SDK

# VCN Components

| Label | Type  | Specs  |
| ------- | --- | --- |
| internetgateway | Internet Gateway | ?? |
| natgateway | NAT Gateway | ?? |
| servicegateway | Service Gateway | ?? |
| public-route-table | Routing Table | <ul><li>Network entity: Internet Gateway (0.0.0.0/0)</li></ul> |
| private-route-table | Routing Table | <ul><li>Network entity: NAT Gateway (0.0.0.0/0)</li><li>Network entity: Service Gateway (all-sin-services-in-oracle-services-network)</li></ul> |
| svc-subnet | Subnet | <ul><li>CIDR Block: 10.0.20.0/24</li><li>Routing Table: public-route-table</li><li>DNS Label: svcSubnetDns</li></ul> |
| k8s-subnet | Subnet | <ul><li>CIDR Block: 10.0.0.0/28</li><li>Routing Table: public-route-table</li><li>DNS Label: k8sSubnetDns</li><li>Security List: k8s-security-list</li></ul> |
| node-subnet | Subnet | <ul><li>CIDR Block: 10.0.10.0/24</li><li>Routing Table: private-route-table</li><li>DNS Label: nodeSubnetDns</li><li>Security List: node-security-list</li></ul> |
| k8s-security-list | Security List | <ul> <li> <div>Ingress Security Rules</div><ol> <li> <ul> <li>Protocol: ICMP</li><li>Source: 10.0.10.0/24</li><li>Description: Path discovery</li><li>Type, Code: 3, 4</li></ul> </li><li> <ul> <li>Protocol: TCP</li><li>Source: 0.0.0.0/0</li><li>Description: External access to Kubernetes API endpoint</li><li>Destination Port Range: 6443</li></ul> </li><li> <ul> <li>Protocol: TCP</li><li>Source: 10.0.10.0/24</li><li>Description: Kubernetes worker to Kubernetes API endpoint communication</li><li>Destination Port Range: 6443</li></ul> </li><li> <ul> <li>Protocol: TCP</li><li>Source: 10.0.10.0/24</li><li>Description: Kubernetes worker to control plane communication</li><li>Destination Port Range: 12250</li></ul> </li></ol> </li><li> <div>Egress Security Rules</div><ol> <li> <ul> <li>Protocol: TCP</li><li>Destination: all-sin-services-in-oracle-services-network</li><li>Destination Type: Service CIDR Block</li><li>Destination Port Range: 443</li><li>Description: Allow Kubernetes Control Plane to communicate with OKE</li></ul> </li><li> <ul> <li>Protocol: TCP</li><li>Destination: 10.0.10.0/24</li><li>Destination Type: CIDR Block</li><li>Description: All traffic to worker nodes</li></ul> </li><li> <ul> <li>Protocol: ICMP</li><li>Destination: 10.0.10.0/24</li><li>Destination Type: CIDR Block</li><li>Description: Path discovery</li><li>Type, Code: 3, 4</li></ul> </li></ol> </li></ul> |
| node-security-list | Security List | <ul> <li> <div>Ingress Security Rules</div><ol> <li> <ul> <li>Protocol: ICMP</li><li>Source: 10.0.10.0/24</li><li>Description: Allow pods on one worker node to communicate with pods on other worker nodes</li></ul> </li><li> <ul> <li>Protocol: ICMP</li><li>Source: 10.0.0.0/28</li><li>Description: Path discovery</li><li>Type, Code: 3, 4</li></ul> </li><li> <ul> <li>Protocol: TCP</li><li>Source: 10.0.0.0/28</li><li>Description: TCP access from Kubernetes Control Plane</li></ul> </li><li> <ul> <li>Protocol: TCP</li><li>Source: 0.0.0.0/0</li><li>Description: Inbound SSH traffic to worker nodes</li><li>Destination Port Range: 22</li></ul> </li></ol> </li><li> <div>Egress Security Rules</div><ol> <li> <ul> <li>Protocol: "all"</li><li>Destination: 10.0.10.0/24</li><li>Description: Allow pods on one worker node to communicate with pods on other worker nodes</li></ul> </li><li> <ul> <li>Protocol: TCP</li><li>Destination: 10.0.0.0/28</li><li>Destination Port Range: 6443</li><li>Description: Access to Kubernetes API Endpoint</li></ul> </li><li> <ul> <li>Protocol: TCP</li><li>Destination: 10.0.0.0/28</li><li>Destination Port Range: 12250</li><li>Description: Kubernetes worker to control plane communication</li></ul> </li><li> <ul> <li>Protocol: ICMP</li><li>Destination: 10.0.0.0/28</li><li>Description: Path discovery</li><li>Type, Code: 3, 4</li></ul> </li><li> <ul> <li>Protocol: TCP</li><li>Destination: all-sin-services-in-oracle-services-network</li><li>Destination Port Range: 443</li><li>Destination Type: Service CIDR Block</li><li>Description: Allow nodes to communicate with OKE to ensure correct start-up and continued functioning</li></ul> </li><li> <ul> <li>Protocol: ICMP</li><li>Destination: 0.0.0.0/0</li><li>Description: ICMP Access from Kubernetes Control Plane</li><li>Type, Code: 3, 4</li></ul> </li><li> <ul> <li>Protocol: "all"</li><li>Destination: 0.0.0.0/0</li><li>Description: Worker Nodes access to Internet</li></ul> </li></ol> </li></ul> |
